{"version":3,"file":"js/198.fb1fa4bb.js","mappings":"6iBAuCAA,IAAAA,OAAc,SAEd,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,GAASC,EAAAA,EAAAA,MAETC,GAAcC,EAAAA,EAAAA,IAAI,CAAC,GACnBC,GAAUD,EAAAA,EAAAA,IAAI,IAGdE,GAAOC,EAAAA,EAAAA,KAAYC,UACvB,IAAIT,EAAMU,OAAOC,GAAI,OACrB,MAAM,GAAEA,GAAOX,EAAMU,OACfE,QAAYC,EAAAA,EAAAA,IAAW,qBAAoBF,KAC3CG,QAAaD,EAAAA,EAAAA,IAAW,gCAC9BP,EAAQS,MAAQD,EAAKE,KAAKA,KAC1BZ,EAAYW,MAAQH,EAAII,KAAKA,KAAK,EAAE,KAGtCC,EAAAA,EAAAA,KAAgB,KACZC,QAAQC,IAAI,mBACZZ,GAAM,IAIV,MAAMa,EAAaC,GACVtB,IAAOsB,GAAMC,OAAO,uBAGvBC,EAAgBZ,IAClBT,EAAOsB,KAAM,SAAQb,IAAK,E,g/BC9D9B,MAAMc,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://web/./src/views/New.vue","webpack://web/./src/views/New.vue?e643"],"sourcesContent":["<template>\r\n  <el-row>\r\n    <el-col :span=\"17\" :offset=\"1\">\r\n      <div>\r\n        <h2>{{ currentNews.title }}</h2>\r\n        <div class=\"time\">{{ whichTime(currentNews.editTime) }}</div>\r\n        <el-divider>\r\n          <el-icon><star-filled /></el-icon>\r\n        </el-divider>\r\n        <div class=\"content\" v-html=\"currentNews.content\"></div>\r\n      </div>\r\n    </el-col>\r\n\r\n\r\n    <el-col :span=\"4\" :offset=\"1\" :pull=\"1\">\r\n      <el-card class=\"box-card\">\r\n        <template #header>\r\n          <div class=\"card-header\">\r\n            <span style=\"font-size:16px;font-weight:bold;\">最近新闻</span>\r\n          </div>\r\n        </template>\r\n        <div v-for=\"item in topNews\" :key=\"item._id\" class=\"text item\" stype=\"padding:14px;\" @click=\"handleChange(item._id)\">\r\n            <span class=\"titlespan\">{{ item.title }}</span>\r\n                  <div class=\"bottom\">\r\n                    <time class=\"time\">{{ whichTime(item.editTime) }}</time>\r\n                  </div>\r\n        </div>\r\n      </el-card>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted, ref,watchEffect,onBeforeUnmount } from \"vue\";\r\nimport axios from \"axios\";\r\nimport { useRoute,useRouter } from \"vue-router\";\r\nimport moment from \"moment\";\r\nimport { StarFilled } from \"@element-plus/icons-vue\";\r\n\r\nmoment.locale(\"zh-cn\");\r\n\r\nconst route = useRoute();\r\nconst router = useRouter()\r\n\r\nconst currentNews = ref({});\r\nconst topNews = ref([])\r\n\r\n//watchEffect监视属性变化\r\nconst stop = watchEffect(async()=>{\r\n  if(!route.params.id) return; \r\n  const { id } = route.params;\r\n  const res = await axios.get(`/webapi/news/list/${id}`);\r\n  const res2 = await axios.get(`/webapi/news/toplist?limit=4`);\r\n  topNews.value = res2.data.data\r\n  currentNews.value = res.data.data[0];\r\n});\r\n//页面卸载的时候移除监视\r\nonBeforeUnmount(()=>{\r\n    console.log('onbeforeunmount')\r\n    stop()\r\n})\r\n\r\n//时间格式化\r\nconst whichTime = (time) => {\r\n  return moment(time).format(\"YYYY MMMDD hh:mm:ss\");\r\n};\r\n\r\nconst handleChange = (id)=>{\r\n    router.push(`/news/${id}`)\r\n}\r\n</script>\r\n\r\n<style v-loading=\"scss\" scoped>\r\n.el-row {\r\n  margin-top: 20px;\r\n}\r\n.time {\r\n  font-size: 13px;\r\n  color: gray;\r\n  margin-top: 10px;\r\n}\r\n</style>","import script from \"./New.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./New.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./New.vue?vue&type=style&index=0&id=484b1944&scoped=true&lang=css\"\n\nimport exportComponent from \"D:\\\\node全栈\\\\全栈 - 副本\\\\web\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-484b1944\"]])\n\nexport default __exports__"],"names":["moment","route","useRoute","router","useRouter","currentNews","ref","topNews","stop","watchEffect","async","params","id","res","axios","res2","value","data","onBeforeUnmount","console","log","whichTime","time","format","handleChange","push","__exports__"],"sourceRoot":""}