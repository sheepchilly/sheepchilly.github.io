"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[434],{7434:function(e,l,a){a.r(l),a.d(l,{default:function(){return W}});a(7658);var u=a(3396),n=a(9242),t=a(7139),s=a(1554),o=a(4614),v=a(4870),d=a(2483),i=a(4161),r=a(7178);const p=e=>((0,u.dD)("data-v-106d64ec"),e=e(),(0,u.Cn)(),e),c={class:"box"},_={class:"container2"},g=p((()=>(0,u._)("h1",null,"register",-1))),f=p((()=>(0,u._)("h1",null,"login",-1))),h=p((()=>(0,u._)("h2",null,[(0,u.Uk)("欢迎来到"),(0,u._)("span",null,"新知道")],-1))),m=p((()=>(0,u._)("p",null,[(0,u.Uk)("快来看看当下最新的"),(0,u._)("span",null,"新闻/商品"),(0,u.Uk)("吧")],-1))),w=p((()=>(0,u._)("img",{src:s,alt:""},null,-1))),b=p((()=>(0,u._)("p",null,"已有账号",-1))),k=p((()=>(0,u._)("h2",null,[(0,u.Uk)("欢迎来到"),(0,u._)("span",null,"新知道")],-1))),y=p((()=>(0,u._)("p",null,[(0,u.Uk)("快来看看当下最新的"),(0,u._)("span",null,"新闻/商品"),(0,u.Uk)("吧")],-1))),U=p((()=>(0,u._)("img",{src:o,alt:""},null,-1))),x=p((()=>(0,u._)("p",null,"没有账号？",-1))),C={class:"dialog-footer"};var H={__name:"Login",setup(e){const l=(0,d.tv)();let a=(0,v.iH)(null),s=(0,v.iH)(null),o=(0,v.iH)(null);const p=(0,v.iH)(""),H=(0,v.iH)(""),V=(0,v.iH)(""),L=(0,v.iH)(!1),W=(0,v.iH)(""),Z=()=>{a.value.style.transform="translateX(80%)",s.value.classList.add("hidden"),o.value.classList.remove("hidden"),p.value="",H.value=""},z=()=>{a.value.style.transform="translateX(0%)",o.value.classList.add("hidden"),s.value.classList.remove("hidden"),p.value="",H.value="",V.value=""},D=async()=>{if(0!==p.value.length&&0!==H.value.length){const e=await i.Z.post("/webapi/user/login",{username:p.value,password:H.value});console.log(e.data.code),2e4==e.data.code?l.push("/"):(L.value=!0,W.value="您输入的账号或者密码错误",(0,u.Y3)((()=>{p.value="",H.value=""})))}else L.value=!0,W.value="账号或密码为空，请重新输入！",p.value="",H.value=""},X=async()=>{if(0!==p.value.length&&0!==H.value.length&&0!==V.value.length)if(H.value===V.value){let e=await i.Z.post("/webapi/user/register",{username:p.value,password:H.value});-2==e.data.code?(L.value=!0,W.value="用户名已存在，请确认后再次输入",p.value="",H.value="",V.value=""):((0,r.z8)({message:"注册成功",type:"success"}),z(),H.value="",V.value="")}else L.value=!0,W.value="两次输入的密码不一致，请重试",H.value="",V.value=""};return(e,l)=>{const v=(0,u.up)("el-button"),d=(0,u.up)("el-dialog");return(0,u.wg)(),(0,u.iD)("div",c,[(0,u._)("div",_,[(0,u._)("div",{class:"form-box",ref_key:"form_box",ref:a},[(0,u._)("div",{class:"register-box hidden",ref_key:"register_box",ref:o},[g,(0,u.wy)((0,u._)("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e)},null,512),[[n.nr,p.value]]),(0,u.wy)((0,u._)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":l[1]||(l[1]=e=>H.value=e)},null,512),[[n.nr,H.value]]),(0,u.wy)((0,u._)("input",{type:"password",placeholder:"确认密码","onUpdate:modelValue":l[2]||(l[2]=e=>V.value=e)},null,512),[[n.nr,V.value]]),(0,u._)("button",{onClick:X},"注册")],512),(0,u._)("div",{class:"login-box",ref_key:"login_box",ref:s},[f,(0,u.wy)((0,u._)("input",{type:"text",placeholder:"用户名","onUpdate:modelValue":l[3]||(l[3]=e=>p.value=e)},null,512),[[n.nr,p.value]]),(0,u.wy)((0,u._)("input",{type:"password",placeholder:"密码","onUpdate:modelValue":l[4]||(l[4]=e=>H.value=e)},null,512),[[n.nr,H.value]]),(0,u._)("button",{onClick:D},"登录")],512)],512),(0,u._)("div",{class:"con-box left"},[h,m,w,b,(0,u._)("button",{onClick:z},"去登录")]),(0,u._)("div",{class:"con-box right"},[k,y,U,x,(0,u._)("button",{onClick:Z},"去注册")])]),(0,u.Wm)(d,{modelValue:L.value,"onUpdate:modelValue":l[7]||(l[7]=e=>L.value=e),title:"提示",width:"30%",draggable:""},{footer:(0,u.w5)((()=>[(0,u._)("span",C,[(0,u.Wm)(v,{onClick:l[5]||(l[5]=e=>L.value=!1)},{default:(0,u.w5)((()=>[(0,u.Uk)("取消")])),_:1}),(0,u.Wm)(v,{type:"primary",onClick:l[6]||(l[6]=e=>L.value=!1)},{default:(0,u.w5)((()=>[(0,u.Uk)(" 确认 ")])),_:1})])])),default:(0,u.w5)((()=>[(0,u._)("span",null,(0,t.zw)(W.value),1)])),_:1},8,["modelValue"])])}}},V=a(89);const L=(0,V.Z)(H,[["__scopeId","data-v-106d64ec"]]);var W=L},4614:function(e,l,a){e.exports=a.p+"img/night.572a7275.png"},1554:function(e,l,a){e.exports=a.p+"img/sun.0edd3cfd.png"}}]);
//# sourceMappingURL=434.8a62f1d4.js.map